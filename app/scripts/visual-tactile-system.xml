<application>

  <name>VisualTactileLocalizationSim</name>
  <description>Visual-tactile localization</description>

  <authors>
    <author email="nicolapiga@gmcail.com">Nicola Piga</author>
  </authors>

  <module>
    <name>yarpdev</name>
    <description>Frame Transform Server</description>
    <node>localhost</node>
    <parameters>--device FrameTransformServer --ROS::enable_ros_publisher false --ROS::enable_ros_subscriber false</parameters>
  </module>

  <module>
    <name>upf-localizer</name>
    <description>UPF filter</description>
    <node>localhost</node>
    <parameters>--context visualTactileLocalization</parameters>
    <dependencies>
      <!-- the filter publishes the estimated pose on the transform server -->
      <port timeout="5.0">/transformServer/transforms:o</port>
    </dependencies>
    <environment>YARP_FORWARD_LOG_ENABLE=1</environment>
  </module>
  
  <module>
    <name>hand_ctrl_module</name>
    <node>localhost</node>
    <parameters>--context visualTactileLocalization --robotName icub --handName right --useSimulatedContacts false</parameters>
    <environment>YARP_FORWARD_LOG_ENABLE=1</environment>
  </module>

  <module>
    <name>hand_ctrl_module</name>
    <node>localhost</node>
    <parameters>--context visualTactileLocalization --robotName icub --handName left --useSimulatedContacts false</parameters>
    <environment>YARP_FORWARD_LOG_ENABLE=1</environment>
  </module>

  <connection>
    <from>/pointCloudRead/pointCloud:o</from>
    <to>/filter-point-cloud/pointcloud:i</to>
  </connection>

  <connection>
    <from>/pointCloudRead/pointCloud:o</from>
    <to>/view-filtering/pointcloud:i</to>
  </connection>

  <connection>
    <from>/pointCloudRead/pointCloud:o</from>
    <to>/upf-localizer/pc:i</to>
  </connection>

  <connection>
    <from>/filter-point-cloud/filtered-pointcloud:o</from>
    <to>/upf-localizer/filtered-pc:i</to>
  </connection>

  <connection>
    <from>/icub/skin/right_hand_comp</from>
    <to>/upf-localizer/contacts:i</to>
  </connection>

  <connection>
    <from>/icub/skin/left_hand_comp</from>
    <to>/upf-localizer/contacts:i</to>
  </connection>
  
  <connection>
    <from>/icub/skin/right_hand_comp</from>
    <to>/hand-control/right/contacts:i</to>
  </connection>

  <connection>
    <from>/icub/skin/left_hand_comp</from>
    <to>/hand-control/left/contacts:i</to>
  </connection>
  
</application>
